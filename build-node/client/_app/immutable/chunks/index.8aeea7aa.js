import{_ as w}from"./preload-helper.41c905a7.js";import{w as _,d as P}from"./index.bb513487.js";import{U as p}from"./index.f42e8665.js";var ne=Object.defineProperty,ce=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,M=(r,t,e)=>t in r?ne(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,u=(r,t)=>{for(var e in t||(t={}))U.call(t,e)&&M(r,e,t[e]);if(D)for(var e of D(t))J.call(t,e)&&M(r,e,t[e]);return r},m=(r,t)=>ce(r,ue(t)),j=(r,t)=>{var e={};for(var a in r)U.call(r,a)&&t.indexOf(a)<0&&(e[a]=r[a]);if(r!=null&&D)for(var a of D(r))t.indexOf(a)<0&&J.call(r,a)&&(e[a]=r[a]);return e},I=["error","warn","debug"],Q=({logger:r=console,level:t=I[1],prefix:e="[i18n]: "})=>I.reduce((a,l,o)=>m(u({},a),{[l]:i=>I.indexOf(t)>=o&&r[l](`${e}${i}`)}),{}),d=Q({}),de=r=>{d=r},z=r=>{var t=r,{parser:e,key:a,params:l,translations:o,locale:i,fallbackLocale:s}=t,c=j(t,["parser","key","params","translations","locale","fallbackLocale"]);if(!(a&&i))return d.warn("No translation key or locale provided. Skipping translation..."),"";let n=(o[i]||{})[a];return s&&n===void 0&&(n=(o[s]||{})[a]),c.hasOwnProperty("fallbackValue")&&n===void 0?c.fallbackValue:e.parse(n,l,i,a)},y=(...r)=>r.length?r.filter(t=>!!t).map(t=>{let e=`${t}`.toLowerCase();try{let[a]=Intl.Collator.supportedLocalesOf(t);if(!a)throw new Error(`'${t}' is non-standard.`);e=a}catch{d.warn(`Non-standard locale provided: '${t}'. Check your 'translations' and 'loaders' in i18n config...`)}return e}):[],F=(r,t)=>Object.keys(r||{}).reduce((e,a)=>{let l=r[a],o=t?`${t}.${a}`:`${a}`;return l&&typeof l=="object"?u(u({},e),F(l,o)):m(u({},e),{[o]:l})},{}),pe=async r=>{try{return(await Promise.all(r.map(t=>{var e=t,{loader:a}=e,l=j(e,["loader"]);return new Promise(async o=>{let i;try{i=await a()}catch(s){d.error(`Failed to load translation. Verify your '${l.locale}' > '${l.key}' Loader.`),d.error(s)}o(m(u({loader:a},l),{data:i}))})}))).reduce((t,{key:e,data:a,locale:l})=>{if(!a)return t;let[o]=y(l);return m(u({},t),{[o]:F(m(u({},t[o]||{}),{[e]:a}))})},{})}catch(t){d.error(t)}return{}},fe=r=>t=>{try{if(typeof t=="string")return t===r;if(typeof t=="object")return t.test(r)}catch{d.error("Invalid route config!")}return!1},he=(r,t)=>{let e=!0;try{e=Object.keys(r).filter(a=>r[a]!==void 0).every(a=>r[a]===t[a])}catch{}return e},H=1e3*60*60*24,me=class{constructor(t){this.cachedAt=0,this.loadedKeys={},this.currentRoute=_(),this.config=_(),this.isLoading=_(!1),this.promises=new Set,this.loading={subscribe:this.isLoading.subscribe,toPromise:(e,a)=>{let l=Array.from(this.promises).filter(o=>he({locale:y(e)[0],route:a},o)).map(({promise:o})=>o);return Promise.all(l)},get:()=>p(this.isLoading)},this.privateTranslations=_({}),this.translations={subscribe:this.privateTranslations.subscribe,get:()=>p(this.translations)},this.locales=m(u({},P([this.config,this.privateTranslations],([e,a])=>{if(!e)return[];let{loaders:l=[]}=e,o=l.map(({locale:s})=>s),i=Object.keys(a).map(s=>s);return Array.from(new Set([...y(...o),...y(...i)]))},[])),{get:()=>p(this.locales)}),this.internalLocale=_(),this.loaderTrigger=P([this.internalLocale,this.currentRoute],([e,a],l)=>{var o,i;e!==void 0&&a!==void 0&&!(e===((o=p(this.loaderTrigger))==null?void 0:o[0])&&a===((i=p(this.loaderTrigger))==null?void 0:i[1]))&&(d.debug("Triggering translation load..."),l([e,a]))},[]),this.localeHelper=_(),this.locale={subscribe:this.localeHelper.subscribe,forceSet:this.localeHelper.set,set:this.internalLocale.set,update:this.internalLocale.update,get:()=>p(this.locale)},this.initialized=P([this.locale,this.currentRoute,this.privateTranslations],([e,a,l],o)=>{p(this.initialized)||o(e!==void 0&&a!==void 0&&!!Object.keys(l).length)}),this.translation=P([this.privateTranslations,this.locale,this.isLoading],([e,a,l],o)=>{let i=e[a];i&&Object.keys(i).length&&!l&&o(i)},{}),this.t=m(u({},P([this.config,this.translation],e=>{var[a]=e,l=a,{parser:o,fallbackLocale:i}=l,s=j(l,["parser","fallbackLocale"]);return(c,...n)=>z(u({parser:o,key:c,params:n,translations:this.translations.get(),locale:this.locale.get(),fallbackLocale:i},s.hasOwnProperty("fallbackValue")?{fallbackValue:s.fallbackValue}:{}))})),{get:(e,...a)=>p(this.t)(e,...a)}),this.l=m(u({},P([this.config,this.translations],e=>{var[a,...l]=e,o=a,{parser:i,fallbackLocale:s}=o,c=j(o,["parser","fallbackLocale"]),[n]=l;return(g,b,...O)=>z(u({parser:i,key:b,params:O,translations:n,locale:g,fallbackLocale:s},c.hasOwnProperty("fallbackValue")?{fallbackValue:c.fallbackValue}:{}))})),{get:(e,a,...l)=>p(this.l)(e,a,...l)}),this.getLocale=e=>{let{fallbackLocale:a=""}=p(this.config)||{},l=e||a;if(!l)return"";let o=this.locales.get();return o.find(i=>y(l).includes(i))||o.find(i=>y(a).includes(i))||""},this.setLocale=e=>{if(e&&e!==p(this.internalLocale))return d.debug(`Setting '${e}' locale.`),this.internalLocale.set(e),this.loading.toPromise(e,p(this.currentRoute))},this.setRoute=e=>{if(e!==p(this.currentRoute)){d.debug(`Setting '${e}' route.`),this.currentRoute.set(e);let a=p(this.internalLocale);return this.loading.toPromise(a,e)}},this.loadConfig=async e=>{await this.configLoader(e)},this.getTranslationProps=async(e=this.locale.get(),a=p(this.currentRoute))=>{let l=p(this.config);if(!l||!e)return[];let o=this.translations.get(),{loaders:i,fallbackLocale:s="",cache:c=H}=l||{},n=Number.isNaN(+c)?H:+c;this.cachedAt?Date.now()>n+this.cachedAt&&(d.debug("Refreshing cache."),this.loadedKeys={},this.cachedAt=0):(d.debug("Setting cache timestamp."),this.cachedAt=Date.now());let[g,b]=y(e,s),O=o[g],T=o[b],$=(i||[]).map(f=>{var v=f,{locale:E}=v,h=j(v,["locale"]);return m(u({},h),{locale:y(E)[0]})}).filter(({routes:f})=>!f||(f||[]).some(fe(a))).filter(({key:f,locale:v})=>v===g&&(!O||!(this.loadedKeys[g]||[]).includes(f))||s&&v===b&&(!T||!(this.loadedKeys[b]||[]).includes(f)));if($.length){this.isLoading.set(!0),d.debug("Fetching translations...");let f=await pe($);this.isLoading.set(!1);let v=Object.keys(f).reduce((h,k)=>m(u({},h),{[k]:Object.keys(f[k])}),{}),E=$.filter(({key:h,locale:k})=>(v[k]||[]).some(R=>`${R}`.startsWith(h))).reduce((h,{key:k,locale:R})=>m(u({},h),{[R]:[...h[R]||[],k]}),{});return[f,E]}return[]},this.addTranslations=(e,a)=>{if(!e)return;d.debug("Adding translations...");let l=Object.keys(e||{});this.privateTranslations.update(o=>l.reduce((i,s)=>m(u({},i),{[s]:u(u({},i[s]||{}),F(e[s]))}),o)),l.forEach(o=>{let i=Object.keys(e[o]).map(s=>`${s}`.split(".")[0]);a&&(i=a[o]),this.loadedKeys[o]=Array.from(new Set([...this.loadedKeys[o]||[],...i||[]]))})},this.loader=async([e,a])=>{let l=this.getLocale(e);d.debug(`Adding loader promise for '${l}' locale and '${a}' route.`);let o=(async()=>{let i=await this.getTranslationProps(l,a);i.length&&this.addTranslations(...i)})();this.promises.add({locale:l,route:a,promise:o}),o.then(()=>{l&&this.locale.get()!==l&&this.locale.forceSet(l)})},this.loadTranslations=(e,a=p(this.currentRoute)||"")=>{let l=this.getLocale(e);if(l)return this.setRoute(a),this.setLocale(l),this.loading.toPromise(l,a)},this.loaderTrigger.subscribe(this.loader),this.isLoading.subscribe(async e=>{e&&this.promises.size&&(await this.loading.toPromise(),this.promises.clear(),d.debug("Loader promises have been purged."))}),t&&this.loadConfig(t)}async configLoader(t){if(!t)return d.error("No config provided!");let e=t,{initLocale:a,fallbackLocale:l,translations:o,log:i}=e,s=j(e,["initLocale","fallbackLocale","translations","log"]);i&&de(Q(i)),[a]=y(a),[l]=y(l),d.debug("Setting config."),this.config.set(u({initLocale:a,fallbackLocale:l,translations:o},s)),o&&this.addTranslations(o),await this.loadTranslations(a)}},X=Object.defineProperty,ge=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,q=(r,t,e)=>t in r?X(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,L=(r,t)=>{for(var e in t||(t={}))Y.call(t,e)&&q(r,e,t[e]);if(A)for(var e of A(t))Z.call(t,e)&&q(r,e,t[e]);return r},ee=(r,t)=>ge(r,ve(t)),V=(r,t)=>{var e={};for(var a in r)Y.call(r,a)&&t.indexOf(a)<0&&(e[a]=r[a]);if(r!=null&&A)for(var a of A(r))t.indexOf(a)<0&&Z.call(r,a)&&(e[a]=r[a]);return e},ye=(r,t)=>{for(var e in t)X(r,e,{get:t[e],enumerable:!0})},te={};ye(te,{ago:()=>Pe,date:()=>we,eq:()=>K,gt:()=>re,gte:()=>Oe,lt:()=>ae,lte:()=>ke,ne:()=>be,number:()=>$e});var N=(r,t)=>{let{modifierDefaults:e}=t||{},{[r]:a}=e||{};return a||{}},K=({value:r,options:t=[],defaultValue:e=""})=>(t.find(({key:a})=>`${a}`.toLowerCase()===`${r}`.toLowerCase())||{}).value||e,be=({value:r,options:t=[],defaultValue:e=""})=>(t.find(({key:a})=>`${a}`.toLowerCase()!==`${r}`.toLowerCase())||{}).value||e,ae=({value:r,options:t=[],defaultValue:e=""})=>(t.sort((a,l)=>+a.key-+l.key).find(({key:a})=>+r<+a)||{}).value||e,re=({value:r,options:t=[],defaultValue:e=""})=>(t.sort((a,l)=>+l.key-+a.key).find(({key:a})=>+r>+a)||{}).value||e,ke=({value:r,options:t=[],defaultValue:e=""})=>K({value:r,options:t,defaultValue:ae({value:r,options:t,defaultValue:e})}),Oe=({value:r,options:t=[],defaultValue:e=""})=>K({value:r,options:t,defaultValue:re({value:r,options:t,defaultValue:e})}),$e=({value:r,props:t,defaultValue:e="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=N("number",l),{maximumFractionDigits:i}=o,s=V(o,["maximumFractionDigits"]),c=(t==null?void 0:t.number)||{},{maximumFractionDigits:n=i||2}=c,g=V(c,["maximumFractionDigits"]);return new Intl.NumberFormat(a,L(ee(L({},s),{maximumFractionDigits:n}),g)).format(+r||+e)},we=({value:r,props:t,defaultValue:e="",locale:a="",parserOptions:l})=>{if(!a)return"";let o=V(N("date",l),[]),i=V((t==null?void 0:t.date)||{},[]);return new Intl.DateTimeFormat(a,L(L({},o),i)).format(+r||+e)},S=[{key:"second",multiplier:1e3},{key:"minute",multiplier:60},{key:"hour",multiplier:60},{key:"day",multiplier:24},{key:"week",multiplier:7},{key:"month",multiplier:13/3},{key:"year",multiplier:12}],le=(r="",t="")=>new RegExp(`^${r}s?$`).test(t),Le=r=>S.indexOf(S.find(({key:t})=>le(t,r))),_e=(r,t)=>S.reduce(([e,a],{key:l,multiplier:o},i)=>{if(le(a,t))return[e,a];if(!a||i===Le(a)+1){let s=Math.round(e/o);if(!a||Math.abs(s)>=1||t!=="auto")return[s,l]}return[e,a]},[r,""]),Pe=({value:r,defaultValue:t="",locale:e="",props:a,parserOptions:l})=>{if(!e)return"";let o=N("ago",l),{format:i,numeric:s}=o,c=V(o,["format","numeric"]),n=(a==null?void 0:a.ago)||{},{format:g=i||"auto",numeric:b=s||"auto"}=n,O=V(n,["format","numeric"]),T=+r||+t,$=_e(T,g);return new Intl.RelativeTimeFormat(e,L(ee(L({},c),{numeric:b}),O)).format(...$)},je=r=>typeof r=="string"&&/{{(?:(?!{{|}}).)+}}/.test(r),C=r=>typeof r=="string"?r.replace(/\\(?=:|;|{|})/g,""):r,Ve=({value:r,props:t,payload:e,parserOptions:a,locale:l})=>`${r}`.replace(/{{\s*(?:(?!{{|}}).)+\s*}}/g,o=>{let i=C(`${o.match(/(?!{|\s).+?(?!\\[:;]).(?=\s*(?:[:;]|}}$))/)}`),s=e==null?void 0:e[i],[,c=""]=o.match(/.+?(?!\\;).;\s*default\s*:\s*([^\s:;].+?(?:\\[:;]|[^;\s}])*)(?=\s*(?:;|}}$))/i)||[];c=c||(e==null?void 0:e.default)||"";let[,n=""]=o.match(/{{\s*(?:[^;]|(?:\\;))+\s*(?:(?!\\:).[:])\s*(?!\s)((?:\\;|[^;])+?)(?=\s*(?:[;]|}}$))/i)||[];if(s===void 0&&n!=="ne")return c;let g=!!n,{customModifiers:b}=a||{},O=L(L({},te),b||{});n=Object.keys(O).includes(n)?n:"eq";let T=O[n],$=(o.match(/[^\s:;{](?:[^;]|\\[;])+[^\s:;}]/gi)||[]).reduce((f,v,E)=>{if(E>0){let h=C(`${v.match(/(?:(?:\\:)|[^:])+/)}`.trim()),k=`${v.match(/(?:(?:\\:)|[^:])+$/)}`.trim();if(h&&h!=="default"&&k)return[...f,{key:h,value:k}]}return f},[]);return!g&&!$.length?s:T({value:s,options:$,props:t,defaultValue:c,locale:l,parserOptions:a})}),oe=({value:r,props:t,payload:e,parserOptions:a,locale:l})=>{if(je(r)){let o=Ve({value:r,payload:e,props:t,parserOptions:a,locale:l});return oe({value:o,payload:e,props:t,parserOptions:a,locale:l})}else return C(r)},Te=r=>({parse:(t,[e,a],l,o)=>(e!=null&&e.default&&t===void 0&&(t=`${e.default}`),t===void 0&&(t=`${o}`),oe({value:t,payload:e,props:a,parserOptions:r,locale:l}))}),Ee=Te,Re=Object.defineProperty,De=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,W=(r,t,e)=>t in r?Re(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,xe=(r,t)=>{for(var e in t||(t={}))ie.call(t,e)&&W(r,e,t[e]);if(x)for(var e of x(t))se.call(t,e)&&W(r,e,t[e]);return r},Ie=(r,t)=>De(r,Ae(t)),Se=(r,t)=>{var e={};for(var a in r)ie.call(r,a)&&t.indexOf(a)<0&&(e[a]=r[a]);if(r!=null&&x)for(var a of x(r))t.indexOf(a)<0&&se.call(r,a)&&(e[a]=r[a]);return e},B=r=>{var t=r,{parserOptions:e={}}=t,a=Se(t,["parserOptions"]);return Ie(xe({},a),{parser:Ee(e)})},Ce=class extends me{constructor(t){super(t&&B(t)),this.loadConfig=e=>super.configLoader(B(e))}},Fe=Ce;const Ne="Francais",Ke="English",G={fr:Ne,en:Ke},Me={translations:{fr:{lang:G},en:{lang:G}},loaders:[{locale:"fr",key:"common",loader:async()=>(await w(()=>import("./common.13aaaba4.js"),[],import.meta.url)).default},{locale:"fr",key:"home",routes:["/"],loader:async()=>(await w(()=>import("./home.8c919b84.js"),[],import.meta.url)).default},{locale:"fr",key:"about",routes:["/about"],loader:async()=>(await w(()=>import("./about.890897e4.js"),[],import.meta.url)).default},{locale:"fr",key:"projects",routes:["/projects"],loader:async()=>(await w(()=>import("./projects.9cb36994.js"),[],import.meta.url)).default},{locale:"en",key:"common",loader:async()=>(await w(()=>import("./common.a210844a.js"),[],import.meta.url)).default},{locale:"en",key:"home",routes:["/"],loader:async()=>(await w(()=>import("./home.635c5849.js"),[],import.meta.url)).default},{locale:"en",key:"about",routes:["/about"],loader:async()=>(await w(()=>import("./about.a263a599.js"),[],import.meta.url)).default},{locale:"en",key:"projects",routes:["/projects"],loader:async()=>(await w(()=>import("./projects.ca272e96.js"),[],import.meta.url)).default}]},{t:Ue,locale:Je,locales:Qe,loading:ze,loadTranslations:Xe}=new Fe(Me);ze.subscribe(r=>r&&console.log("Loading translations..."));export{Xe as a,Qe as b,Je as l,Ue as t};
