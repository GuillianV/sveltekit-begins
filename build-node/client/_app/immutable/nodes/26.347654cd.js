import{S as Q,i as Z,s as ee,k as y,a as R,q as N,l as S,m as x,h as p,c as W,r as D,n as g,b as te,G as n,H as F,o as oe}from"../chunks/index.137f5445.js";import{T as ae,N as k,U as se,S as ne,m as ie,b as B,r as re,n as ce,V as le,I as de,K as he,J as me,O as we,A as pe,D as ge,P as ue,W as fe,L as ve,X as O,c as ye,d as Se}from"../chunks/three.module.c2ac7129.js";import{g as q}from"../chunks/index.7127c1b0.js";import{S as xe}from"../chunks/ScrollTrigger.d950decd.js";import{G as Me}from"../chunks/lil-gui.esm.5b862306.js";function _e(j){let i,t,d,E,M,u,P,r,c,o,C,_,l,f,H;return{c(){i=y("div"),t=y("div"),d=y("canvas"),E=R(),M=y("section"),u=y("h2"),P=N("Guillian"),r=R(),c=y("section"),o=y("h2"),C=N("Vibert"),_=R(),l=y("section"),f=y("h2"),H=N("Vallet"),this.h()},l(h){i=S(h,"DIV",{id:!0,class:!0});var b=x(i);t=S(b,"DIV",{class:!0});var m=x(t);d=S(m,"CANVAS",{class:!0}),x(d).forEach(p),E=W(m),M=S(m,"SECTION",{class:!0});var T=x(M);u=S(T,"H2",{class:!0});var G=x(u);P=D(G,"Guillian"),G.forEach(p),T.forEach(p),r=W(m),c=S(m,"SECTION",{class:!0});var e=x(c);o=S(e,"H2",{class:!0});var w=x(o);C=D(w,"Vibert"),w.forEach(p),e.forEach(p),_=W(m),l=S(m,"SECTION",{class:!0});var v=x(l);f=S(v,"H2",{class:!0});var L=x(f);H=D(L,"Vallet"),L.forEach(p),v.forEach(p),m.forEach(p),b.forEach(p),this.h()},h(){g(d,"class","webgl svelte-stdqeh"),g(u,"class","left svelte-stdqeh"),g(M,"class","svelte-stdqeh"),g(o,"class","right svelte-stdqeh"),g(c,"class","svelte-stdqeh"),g(f,"class","left svelte-stdqeh"),g(l,"class","svelte-stdqeh"),g(t,"class","app svelte-stdqeh"),g(i,"id","app-container"),g(i,"class","svelte-stdqeh")},m(h,b){te(h,i,b),n(i,t),n(t,d),n(t,E),n(t,M),n(M,u),n(u,P),n(t,r),n(t,c),n(c,o),n(o,C),n(t,_),n(t,l),n(l,f),n(f,H)},p:F,i:F,o:F,d(h){h&&p(i)}}}function Ce(j){return oe(()=>{ye.enabled=!1,q.registerPlugin(xe);const i=new Se,t=new ae(i),d=t.load("/three/journey/20/textures/gradients/3.jpg");d.minFilter=k,d.magFilter=k,d.generateMipmaps=!1;const E=t.load("/three/journey/18/textures/particles/12.png");E.magFilter=k;const M=new Me,u={materialColor:"#ecb998"};M.addColor(u,"materialColor").onChange(a=>{c.color=new se(a)});const P=document.querySelector("canvas.webgl"),r=new ne,c=new ie({gradientMap:d,color:u.materialColor}),o=[],C=new B(new re(2,.5,10,48),c);o.push(C),C.position.set(2,0,-5),r.add(C);const _=new B(new ce(2,5,5,4),c);o.push(_),_.geometry.center(),_.position.set(-2,-10,-5),r.add(_);const l=new B(new le(2,1),c);o.push(l),l.geometry.center(),l.position.set(2,-20,-5),r.add(l);const f=1e3,H=new de,h=new Float32Array(f*3);for(let a=0;a<f;a++){const s=a*3;h[s]=(Math.random()-.5)*10,h[s+1]=Math.random()*-30+5,h[s+2]=(Math.random()-.5)*10}H.setAttribute("position",new he(h,3));const b=new me({color:16777215,size:.4,sizeAttenuation:!0,alphaMap:E,transparent:!0}),m=new we(H,b);r.add(m);const T=new pe(16777215,.2);r.add(T);const G=new ge(16777215,.9);G.position.set(4,4,4),r.add(G);const e={width:window.innerWidth,height:window.innerHeight,maxScrollHeight:document.body.scrollHeight-window.innerHeight,sections:3};e.sectionScrollHeight=e.maxScrollHeight/e.sections,window.addEventListener("resize",()=>{e.width=window.innerWidth,e.height=window.innerHeight,e.maxScrollHeight=document.body.scrollHeight-window.innerHeight,e.sectionScrollHeight=e.maxScrollHeight/e.sections,w.aspect=e.width/e.height,w.updateProjectionMatrix(),v.setSize(e.width,e.height),v.setPixelRatio(Math.min(window.devicePixelRatio,2))});const w=new ue(45,e.width/e.height,.1,100);w.position.z=10,r.add(w);const v=new fe({canvas:P,alpha:!0});v.outputColorSpace=ve,v.setSize(e.width,e.height),v.setPixelRatio(Math.min(window.devicePixelRatio,2));const L=w.position;let A=new O(L.x,L.y,L.z),z=new O(0,0,0),$=Date.now();const U=()=>{const a=Date.now(),s=a-$;if($=a,o.forEach((J,K)=>{J.rotation.y+=(1+K)*s*.001}),w.position.lerp(new O(A.x+z.x,A.y+z.y,A.z+z.z),.15),v.render(r,w),window.requestAnimationFrame(U),X++,X==V){var I=window.performance.now();console.log(`time for ${V} row of tick`,(I-Y)/V)}};let X=0,V=1e3;var Y=window.performance.now();U(),document.querySelectorAll("h2").forEach((a,s)=>{q.timeline({scrollTrigger:{trigger:a,start:"top center",end:"bottom center",once:!1,onEnter:()=>{q.to(o[s].rotation,{duration:1.5,ease:"power4",y:"+=3"})},onLeave:()=>{q.to(o[s].rotation,{duration:1.5,ease:"power4",y:"+=3"})},onEnterBack:()=>{q.to(o[s].rotation,{duration:1.5,ease:"power4",y:"+=3"})},onLeaveBack:()=>{q.to(o[s].rotation,{duration:1.5,ease:"power4",y:"+=3"})}}})}),window.addEventListener("scroll",a=>{const s=window.scrollY/e.maxScrollHeight;A.y=-20*s}),window.addEventListener("mousemove",a=>{const s=a.clientX/window.innerWidth-.5,I=a.clientY/window.innerWidth-.5;z.set(s,I,0)})}),[]}class Pe extends Q{constructor(i){super(),Z(this,i,Ce,_e,ee,{})}}export{Pe as component};
