{"version":3,"file":"9-9aac755c.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(admin)/admin/register/_page.server.js","../../../.svelte-kit/adapter-node/nodes/9.js"],"sourcesContent":["import { f as fail, r as redirect } from \"../../../../../chunks/index.js\";\nimport bcrypt from \"bcrypt\";\nimport { d as db } from \"../../../../../chunks/index5.js\";\nlet Roles = {\n  ADMIN: \"ADMIN\",\n  USER: \"USER\"\n};\nconst actions = {\n  register: async (event) => {\n    const request = event.request;\n    const data = await request.formData();\n    const username = data.get(\"username\");\n    const password = data.get(\"password\");\n    if (typeof username !== \"string\" || typeof password !== \"string\" || !username || !password) {\n      return fail(400, { invalid: true });\n    }\n    const user = await db.user.findUnique({\n      where: { username }\n    });\n    if (user) {\n      return fail(400, { user: true });\n    }\n    await db.user.create({\n      data: {\n        username,\n        passwordHash: await bcrypt.hash(password, 10),\n        userAuthToken: crypto.randomUUID(),\n        role: { connect: { name: Roles.USER } }\n      }\n    });\n    throw redirect(303, \"/admin/login\");\n  }\n};\nconst load = async (serverloadEvent) => {\n  let { locals } = serverloadEvent;\n  if (locals.user) {\n    throw redirect(302, \"/admin/home\");\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/(admin)/admin/register/_page.server.js';\n\nexport const index = 9;\nexport const component = async () => (await import('../entries/pages/(admin)/admin/register/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(admin)/admin/register/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/9.a65387d7.js\",\"_app/immutable/chunks/index.137f5445.js\",\"_app/immutable/chunks/H1.3d9f7839.js\",\"_app/immutable/chunks/index.32dea7b4.js\",\"_app/immutable/chunks/preload-helper.41c905a7.js\",\"_app/immutable/chunks/index.d60425e4.js\"];\nexport const stylesheets = [\"_app/immutable/assets/H1.bb193338.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;AAGA,IAAI,KAAK,GAAG;AACZ,EAAE,KAAK,EAAE,OAAO;AAChB,EAAE,IAAI,EAAE,MAAM;AACd,CAAC,CAAC;AACF,MAAM,OAAO,GAAG;AAChB,EAAE,QAAQ,EAAE,OAAO,KAAK,KAAK;AAC7B,IAAI,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;AAClC,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE,CAAC;AAC1C,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAC1C,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAC1C,IAAI,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,EAAE;AAChG,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1C,KAAK;AACL,IAAI,MAAM,IAAI,GAAG,MAAM,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC;AAC1C,MAAM,KAAK,EAAE,EAAE,QAAQ,EAAE;AACzB,KAAK,CAAC,CAAC;AACP,IAAI,IAAI,IAAI,EAAE;AACd,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AACvC,KAAK;AACL,IAAI,MAAM,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;AACzB,MAAM,IAAI,EAAE;AACZ,QAAQ,QAAQ;AAChB,QAAQ,YAAY,EAAE,MAAM,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC;AACrD,QAAQ,aAAa,EAAE,MAAM,CAAC,UAAU,EAAE;AAC1C,QAAQ,IAAI,EAAE,EAAE,OAAO,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,EAAE;AAC/C,OAAO;AACP,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;AACxC,GAAG;AACH,CAAC,CAAC;AACF,MAAM,IAAI,GAAG,OAAO,eAAe,KAAK;AACxC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,eAAe,CAAC;AACnC,EAAE,IAAI,MAAM,CAAC,IAAI,EAAE;AACnB,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,aAAa,CAAC,CAAC;AACvC,GAAG;AACH,CAAC;;;;;;;;ACpCW,MAAC,KAAK,GAAG,EAAE;AACX,MAAC,SAAS,GAAG,YAAY,CAAC,MAAM,OAAO,4BAAyD,CAAC,EAAE,QAAQ;AAE3G,MAAC,SAAS,GAAG,oDAAoD;AACjE,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,yCAAyC,CAAC,sCAAsC,CAAC,yCAAyC,CAAC,kDAAkD,CAAC,yCAAyC,EAAE;AAC1Q,MAAC,WAAW,GAAG,CAAC,uCAAuC,EAAE;AACzD,MAAC,KAAK,GAAG;;;;"}